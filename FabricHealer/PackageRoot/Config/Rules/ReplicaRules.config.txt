## This demonstrates a workflow that employs multiple external predicates to get to a solution for a single unhealthy replica scenario.

## First, check if we are inside run interval. If so, then cut (!), which means stop processing rules.
Mitigate() :- CheckInsideRunInterval(RunInterval=00:15:00), !.

Mitigate() :- GetRepairHistory(?repairCount, ?lastRunTime, RestartReplica), 
	?repairCount < 3,
	RestartReplica(MaxRepairs=3).

## Else, try this.
Mitigate() :- GetRepairHistory(?repairCount, ?lastRunTime, RestartCodePackage), 
	?repairCount < 3,
	RestartCodePackage(MaxRepairs=3).

## Else, try this.
Mitigate() :- GetRepairHistory(?repairCount, ?lastRunTime, RestartFabricNode), 
	?repairCount < 3,
	RestartFabricNode(MaxRepairs=3).